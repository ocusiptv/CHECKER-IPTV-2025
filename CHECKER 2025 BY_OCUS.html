<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analizador IPTV Futurista Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00f7ff;
            --secondary: #ff00f7;
            --dark: #0a0a20;
            --darker: #050510;
            --light: #e0e0ff;
            --accent: #7b2dff;
            --glow: 0 0 10px var(--primary);
        }
        
        body {
            background-color: var(--darker);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(123, 45, 255, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 247, 255, 0.1) 0%, transparent 20%);
            color: var(--light);
            font-family: 'Rajdhani', sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        .light-effect {
            position: absolute;
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(0, 247, 255, 0.3) 0%, transparent 70%);
            filter: blur(20px);
            animation: pulse 4s infinite alternate;
            z-index: -1;
        }
        
        .light-effect:nth-child(1) {
            top: 10%;
            left: 5%;
            animation-delay: 0s;
        }
        
        .light-effect:nth-child(2) {
            bottom: 15%;
            right: 5%;
            background: radial-gradient(circle, rgba(255, 0, 247, 0.3) 0%, transparent 70%);
            animation-delay: 1s;
        }
        
        .light-effect:nth-child(3) {
            top: 50%;
            left: 30%;
            animation-delay: 2s;
            width: 200px;
            height: 200px;
        }
        
        @keyframes pulse {
            0% { opacity: 0.2; transform: scale(0.8); }
            100% { opacity: 0.6; transform: scale(1.2); }
        }
        
        .scanline {
            position: absolute;
            width: 100%;
            height: 2px;
            background: linear-gradient(to right, transparent, var(--primary), transparent);
            opacity: 0.1;
            animation: scan 8s linear infinite;
            z-index: -1;
        }
        
        .scanline:nth-child(2) {
            top: 30%;
            animation-delay: 2s;
        }
        
        .scanline:nth-child(3) {
            top: 70%;
            animation-delay: 4s;
        }
        
        @keyframes scan {
            0% { top: 0%; opacity: 0.1; }
            50% { opacity: 0.3; }
            100% { top: 100%; opacity: 0.1; }
        }
        
        .tv-animation {
            position: absolute;
            width: 80px;
            height: 60px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 80"><rect x="10" y="5" width="80" height="60" rx="5" ry="5" fill="none" stroke="%2300f7ff" stroke-width="2"/><rect x="15" y="10" width="70" height="45" fill="%2300f7ff" opacity="0.2"/><rect x="45" y="60" width="10" height="10" fill="%2300f7ff" opacity="0.5"/><circle cx="20" cy="70" r="2" fill="%2300f7ff"/><circle cx="30" cy="70" r="2" fill="%2300f7ff"/></svg>') no-repeat;
            animation: float 25s infinite linear;
            z-index: -1;
            filter: drop-shadow(0 0 5px var(--primary));
        }
        
        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(calc(100vw - 100px), 50vh) rotate(90deg); }
            50% { transform: translate(calc(100vw - 100px), calc(100vh - 100px)) rotate(180deg); }
            75% { transform: translate(0, calc(100vh - 100px)) rotate(270deg); }
            100% { transform: translate(0, 0) rotate(360deg); }
        }
        
        .info-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 10px;
            background: rgba(10, 10, 32, 0.5);
            border-radius: 5px;
            border: 1px solid var(--primary);
            box-shadow: 0 0 15px rgba(0, 247, 255, 0.2);
        }
        
        .clock, .weather, .year {
            font-family: 'Orbitron', sans-serif;
            color: var(--primary);
            text-shadow: var(--glow);
            letter-spacing: 1px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            background: rgba(5, 5, 16, 0.7);
            border: 1px solid var(--primary);
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0, 247, 255, 0.2);
            backdrop-filter: blur(5px);
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--primary);
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            font-family: 'Orbitron', sans-serif;
            color: var(--light);
            border: 1px solid transparent;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .tab::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--primary);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }
        
        .tab:hover {
            background: rgba(0, 247, 255, 0.1);
        }
        
        .tab.active {
            color: var(--primary);
            border-color: var(--primary);
            background: rgba(0, 247, 255, 0.05);
        }
        
        .tab.active::after {
            transform: translateX(0);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .glow {
            text-shadow: 0 0 10px var(--primary), 0 0 20px rgba(0, 247, 255, 0.5);
        }
        
        h1 {
            font-family: 'Orbitron', sans-serif;
            text-align: center;
            color: var(--primary);
            font-size: 2.5rem;
            margin-bottom: 30px;
            letter-spacing: 2px;
            position: relative;
            padding-bottom: 15px;
        }
        
        h1::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 25%;
            width: 50%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
        }
        
        .input-container {
            position: relative;
            margin-bottom: 30px;
        }
        
        .input-container::before {
            content: '>>>';
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary);
            font-family: 'Orbitron', sans-serif;
        }
        
        input[type="text"] {
            width: 100%;
            padding: 15px 15px 15px 40px;
            background-color: rgba(10, 10, 32, 0.8);
            border: 1px solid var(--primary);
            border-radius: 5px;
            color: var(--light);
            font-size: 1rem;
            font-family: 'Rajdhani', sans-serif;
            transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(0, 247, 255, 0.1);
        }
        
        input[type="text"]:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 20px rgba(255, 0, 247, 0.3);
        }
        
        button {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: var(--darker);
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 1px;
            text-transform: uppercase;
            display: block;
            margin: 0 auto;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 247, 255, 0.3);
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 247, 255, 0.5);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        #loading {
            text-align: center;
            margin: 30px 0;
            display: none;
        }
        
        .spinner {
            border: 4px solid rgba(0, 247, 255, 0.2);
            border-radius: 50%;
            border-top: 4px solid var(--primary);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .result-container {
            background-color: rgba(10, 10, 32, 0.7);
            border: 1px solid var(--primary);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            box-shadow: 0 0 30px rgba(0, 247, 255, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .result-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--primary));
        }
        
        .terminal-line {
            font-family: 'Courier New', monospace;
            margin: 5px 0;
            padding-left: 15px;
            position: relative;
            line-height: 1.6;
        }
        
        .terminal-line::before {
            content: '➤';
            position: absolute;
            left: 0;
            color: var(--primary);
        }
        
        .terminal-header, .terminal-footer {
            font-family: 'Orbitron', sans-serif;
            color: var(--primary);
            text-align: center;
            margin: 15px 0;
            letter-spacing: 1px;
        }
        
        .terminal-section {
            margin: 20px 0;
            border-left: 2px solid var(--accent);
            padding-left: 15px;
        }
        
        .category-item {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            padding: 5px 10px;
            background-color: rgba(0, 247, 255, 0.05);
            border-radius: 4px;
            transition: all 0.2s ease;
        }
        
        .category-item:hover {
            background-color: rgba(0, 247, 255, 0.1);
            transform: translateX(5px);
        }
        
        .category-name {
            color: var(--light);
            flex-grow: 1;
        }
        
        .category-count {
            color: var(--secondary);
            font-weight: bold;
            margin-left: 10px;
        }
        
        .status-active {
            color: #00ff88;
            text-shadow: 0 0 8px rgba(0, 255, 136, 0.5);
        }
        
        .m3u-url {
            display: block;
            margin: 15px 0;
            padding: 10px;
            background-color: rgba(123, 45, 255, 0.1);
            border-left: 3px solid var(--accent);
            word-break: break-all;
            font-family: 'Courier New', monospace;
        }
        
        .timestamp {
            text-align: right;
            font-size: 0.8rem;
            color: rgba(224, 224, 255, 0.6);
            margin-top: 20px;
        }
        
        .divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
            margin: 20px 0;
            opacity: 0.3;
        }
        
        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 10px;
            background-color: var(--accent);
            color: var(--darker);
        }
        
        .download-btn {
            background: linear-gradient(135deg, var(--secondary), var(--accent));
            color: var(--darker);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 1px;
            margin: 15px auto;
            display: block;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 0, 247, 0.3);
        }
        
        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 0, 247, 0.5);
        }
        
        .download-btn:active {
            transform: translateY(1px);
        }
        
        .download-container {
            text-align: center;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px dashed var(--primary);
        }
        
        .style-selector {
            margin-bottom: 15px;
            text-align: left;
            background: rgba(10, 10, 32, 0.7);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--accent);
        }
        
        .style-selector label {
            display: block;
            margin-bottom: 10px;
            color: var(--primary);
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            text-shadow: 0 0 5px var(--primary);
        }
        
        .style-selector select {
            width: 100%;
            padding: 10px;
            background-color: rgba(5, 5, 16, 0.8);
            border: 1px solid var(--primary);
            border-radius: 5px;
            color: var(--light);
            font-family: 'Rajdhani', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .style-selector select:hover {
            border-color: var(--secondary);
            box-shadow: 0 0 10px rgba(255, 0, 247, 0.3);
        }
        
        .style-selector select:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 15px rgba(255, 0, 247, 0.5);
        }
        
        .style-option {
            padding: 8px;
        }
        
        .author-credit {
            position: fixed;
            bottom: 10px;
            right: 10px;
            font-family: 'Orbitron', sans-serif;
            color: var(--primary);
            font-size: 0.8rem;
            text-shadow: var(--glow);
            opacity: 0.7;
            transition: all 0.3s ease;
            z-index: 100;
            background: rgba(5, 5, 16, 0.5);
            padding: 5px 10px;
            border-radius: 15px;
            border: 1px solid var(--primary);
            box-shadow: 0 0 10px rgba(0, 247, 255, 0.3);
        }
        
        .author-credit:hover {
            opacity: 1;
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(0, 247, 255, 0.5);
        }
        
        .author-credit::before {
            content: '🔔 ';
        }

        /* Estilos para el QR */
        .qr-container {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: rgba(10, 10, 32, 0.7);
            border: 1px solid var(--primary);
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 247, 255, 0.3);
        }

        #qrCode {
            margin: 15px auto;
            padding: 10px;
            background: white;
            border-radius: 8px;
            display: inline-block;
        }

        #qrCode img {
            display: block;
            margin: 0 auto;
        }

        .qr-container h3 {
            margin-bottom: 15px;
            font-family: 'Orbitron', sans-serif;
            color: var(--primary);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            input[type="text"] {
                padding: 12px 12px 12px 35px;
            }
            
            .tv-animation {
                display: none;
            }
            
            .tabs {
                flex-wrap: wrap;
            }
            
            .tab {
                padding: 8px 12px;
                font-size: 0.9rem;
            }
            
            .author-credit {
                font-size: 0.7rem;
                bottom: 5px;
                right: 5px;
            }
        }
    </style>
</head>
<body>
    <!-- Protección contra inspección -->
    <script>
    // Deshabilitar clic derecho
    document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        alert('Acción no permitida');
    });

    // Deshabilitar teclas de acceso rápido
    document.addEventListener('keydown', function(e) {
        // Bloquear F12, Ctrl+Shift+I, Ctrl+U
        if (e.key === 'F12' || 
            (e.ctrlKey && e.shiftKey && e.key === 'I') || 
            (e.ctrlKey && e.key === 'u')) {
            e.preventDefault();
            alert('Acción no permitida');
        }
    });
    </script>

    <!-- Efectos de luces -->
    <div class="light-effect"></div>
    <div class="light-effect"></div>
    <div class="light-effect"></div>
    
    <!-- Líneas de escaneo -->
    <div class="scanline"></div>
    <div class="scanline"></div>
    <div class="scanline"></div>
    
    <!-- TV animada -->
    <div class="tv-animation"></div>
    
    <div class="container">
        <!-- Barra superior con reloj y clima -->
        <div class="info-bar">
            <div class="clock" id="clock">00:00:00</div>
            <div class="weather" id="weather">🌡️ 24°C ☀️</div>
            <div class="year" id="year">2025</div>
        </div>
        
        <h1 class="glow">ANALIZADOR IPTV <span class="badge">FUTURISTA PRO</span></h1>
        
        <!-- Contenedor QR -->
        <div class="qr-container" id="qrContainer">
            <h3 class="glow">ESCANEA PARA USAR EL CHECKER</h3>
            <div id="qrCode"></div>
            <button class="download-btn" id="shareBtn">COMPARTIR ENLACE</button>
        </div>
        
        <div class="input-container">
            <input type="text" id="url" placeholder="Ingresa la URL de la lista IPTV (ej: http://dominio.com:8080/get.php?username=xxx&password=xxx)" required>
        </div>
        
        <button id="analyzeBtn">ANALIZAR</button>
        
        <div id="loading" style="display: none;">
            <div class="spinner"></div>
            <p>ESCANEANDO SERVIDOR...</p>
        </div>
        
        <div id="result" class="hidden">
            <!-- Pestañas -->
            <div class="tabs">
                <div class="tab active" data-tab="info">Información</div>
                <div class="tab" data-tab="live">En Vivo</div>
                <div class="tab" data-tab="vod">VOD</div>
                <div class="tab" data-tab="series">Series</div>
            </div>
            
            <!-- Contenido de pestañas -->
            <div class="tab-content active" id="info-tab">
                <div class="result-container">
                    <div class="terminal-header">╭➤ 𝗛𝗶𝘁𝘀 ʙʏ ★彡【 IPTV ANALYZER PRO 】彡★</div>
                    
                    <div class="terminal-section">
                        <div class="terminal-line"><span class="category-name">🌐 Host</span> <span class="category-count" id="host">-</span></div>
                        <div class="terminal-line"><span class="category-name">👤 User</span> <span class="category-count" id="user">-</span></div>
                        <div class="terminal-line"><span class="category-name">🔑 Pass</span> <span class="category-count" id="pass">-</span></div>
                        <div class="terminal-line"><span class="category-name">📆 Exp.</span> <span class="category-count" id="expiry">-</span></div>
                        <div class="terminal-line"><span class="category-name">👥 Act Con</span> <span class="category-count" id="active-cons">-</span></div>
                        <div class="terminal-line"><span class="category-name">👪 Max Con</span> <span class="category-count" id="max-cons">-</span></div>
                        <div class="terminal-line"><span class="category-name">⚡ Status</span> <span class="category-count status-active" id="status">-</span></div>
                    </div>
                    
                    <div class="terminal-footer">╰─➤ 𝗛𝗶𝘁𝘀 ʙʏ ★彡【 IPTV ANALYZER PRO 】彡★</div>
                    
                    <div class="divider"></div>
                    
                    <div class="terminal-section">
                        <div class="terminal-line"><span class="category-name">🎬 En Vivo</span> <span class="category-count" id="live-count">0</span></div>
                        <div class="terminal-line"><span class="category-name">🎬 Películas</span> <span class="category-count" id="vod-count">0</span></div>
                        <div class="terminal-line"><span class="category-name">🎬 Series</span> <span class="category-count" id="series-count">0</span></div>
                    </div>
                    
                    <div class="terminal-line">●🔗m3u_Url➤</div>
                    <div class="m3u-url" id="m3u-url">-</div>
                    
                    <div class="timestamp" id="timestamp"></div>
                </div>
            </div>
            
            <!-- Pestaña En Vivo -->
            <div class="tab-content" id="live-tab">
                <div class="result-container">
                    <div class="terminal-header">╭➤ CANALES EN VIVO ➤</div>
                    <div id="live-categories"></div>
                    <div class="timestamp" id="live-timestamp"></div>
                </div>
            </div>
            
            <!-- Pestaña VOD -->
            <div class="tab-content" id="vod-tab">
                <div class="result-container">
                    <div class="terminal-header">╭➤ PELÍCULAS VOD ➤</div>
                    <div id="vod-categories"></div>
                    <div class="timestamp" id="vod-timestamp"></div>
                </div>
            </div>
            
            <!-- Pestaña Series -->
            <div class="tab-content" id="series-tab">
                <div class="result-container">
                    <div class="terminal-header">╭➤ SERIES ➤</div>
                    <div id="series-categories"></div>
                    <div class="timestamp" id="series-timestamp"></div>
                </div>
            </div>
            
            <!-- Selector de estilo y botón de descarga -->
            <div class="download-container">
                <div class="style-selector">
                    <label for="report-style">🎨 Estilo del Reporte:</label>
                    <select id="report-style">
                        <option value="classic">🖥️ Clásico Terminal</option>
                        <option value="modern">🔄 Moderno Minimalista</option>
                        <option value="emoji">🎭 Emoji Explosión</option>
                        <option value="code">💻 Líneas de Código</option>
                        <option value="table">📊 Tabla Estilizada</option>
                        <option value="signature">🖋️ Firma Digital</option>
                        <option value="retro">📼 Retro TV</option>
                        <option value="cyber">🌐 Cyberpunk</option>
                        <option value="elegant">🎩 Elegante</option>
                        <option value="tech">🔌 Alta Tecnología</option>
                    </select>
                </div>
                <button class="download-btn" id="downloadBtn">DESCARGAR RESULTADOS (TXT)</button>
            </div>
        </div>
    </div>

    <!-- Créditos del autor -->
    <div class="author-credit" title="Creador del proyecto">AUTOR: @XxOCUSxX</div>

    <script>
        // =============================================
        // Código protegido - No modificar
        // =============================================
        
        // Generar QR al cargar la página
        document.addEventListener('DOMContentLoaded', function() {
            generateQR();
            updateClock();
            updateWeather();
            setupTabs();
            setupDownloadButton();
            setupAnalyzeButton();
        });

        // Función para generar el QR
        function generateQR() {
            const qrCodeDiv = document.getElementById('qrCode');
            const currentUrl = window.location.href;
            
            // Generar el código QR
            const qr = qrcode(0, 'L');
            qr.addData(currentUrl);
            qr.make();
            
            // Crear elemento de imagen QR
            const qrImg = qr.createImgTag(4, 8);
            qrCodeDiv.innerHTML = qrImg;
            
            // Configurar botón de compartir
            document.getElementById('shareBtn').addEventListener('click', shareLink);
        }

        // Función para compartir enlace
        function shareLink() {
            const currentUrl = window.location.href;
            
            if (navigator.share) {
                navigator.share({
                    title: 'IPTV Checker Pro',
                    text: 'Escanea este código QR para usar el IPTV Checker Pro',
                    url: currentUrl
                }).catch(err => {
                    console.log('Error al compartir:', err);
                    copyToClipboard(currentUrl);
                });
            } else {
                copyToClipboard(currentUrl);
            }
        }

        // Función para copiar al portapapeles
        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            
            alert('Enlace copiado al portapapeles: ' + text);
        }

        // Actualizar reloj en tiempo real
        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            document.getElementById('clock').textContent = timeString;
            document.getElementById('year').textContent = now.getFullYear();
            
            // Actualizar timestamps
            const timestamp = now.toISOString().replace('T', ' ').substring(0, 19);
            document.getElementById('timestamp').textContent = timestamp;
            document.getElementById('live-timestamp').textContent = timestamp;
            document.getElementById('vod-timestamp').textContent = timestamp;
            document.getElementById('series-timestamp').textContent = timestamp;
        }
        
        // Simular datos del clima
        function updateWeather() {
            const weatherConditions = ['☀️', '🌤️', '⛅', '🌧️', '⛈️', '❄️'];
            const randomTemp = Math.floor(Math.random() * 15) + 15; // 15-30°C
            const randomWeather = weatherConditions[Math.floor(Math.random() * weatherConditions.length)];
            document.getElementById('weather').textContent = `🌡️ ${randomTemp}°C ${randomWeather}`;
        }
        
        // Manejo de pestañas
        function setupTabs() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    // Desactivar todas las pestañas
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Activar pestaña seleccionada
                    tab.classList.add('active');
                    document.getElementById(`${tab.dataset.tab}-tab`).classList.add('active');
                });
            });
        }
        
        // Función para procesar categorías
        function processCategories(categories, items, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            if (!categories || !items) {
                container.innerHTML = '<div class="terminal-line">No hay datos disponibles</div>';
                return;
            }
            
            // Agrupar items por categoría
            const itemsByCategory = {};
            items.forEach(item => {
                const catId = item.category_id;
                if (!itemsByCategory[catId]) {
                    itemsByCategory[catId] = [];
                }
                itemsByCategory[catId].push(item);
            });
            
            // Mostrar categorías con conteo
            categories.forEach(category => {
                const categoryItem = document.createElement('div');
                categoryItem.className = 'terminal-line category-item';
                
                const categoryName = document.createElement('span');
                categoryName.className = 'category-name';
                
                // Icono diferente según el tipo de contenido
                let icon = '📺';
                if (containerId.includes('vod')) icon = '🎬';
                if (containerId.includes('series')) icon = '📽️';
                
                categoryName.textContent = `${icon} ${category.category_name}`;
                
                const categoryCount = document.createElement('span');
                categoryCount.className = 'category-count';
                categoryCount.textContent = `[${itemsByCategory[category.category_id]?.length || 0}]`;
                
                categoryItem.appendChild(categoryName);
                categoryItem.appendChild(categoryCount);
                container.appendChild(categoryItem);
            });
        }
        
        // Configurar botón de descarga
        function setupDownloadButton() {
            document.getElementById('downloadBtn').addEventListener('click', downloadTxt);
        }
        
        // Configurar botón de análisis
        function setupAnalyzeButton() {
            document.getElementById('analyzeBtn').addEventListener('click', analyzeIPTV);
        }
        
        // Función para analizar IPTV
        async function analyzeIPTV() {
            const url = document.getElementById('url').value.trim();
            if (!url) {
                alert('Por favor ingresa una URL válida');
                return;
            }

            let panel;
            try {
                panel = new URL(url).hostname;
            } catch (e) {
                alert('URL inválida. Por favor, ingrese una URL válida.');
                return;
            }

            document.getElementById('loading').style.display = 'block';
            document.getElementById('result').classList.add('hidden');

            const headerj = {
                'content-type': 'application/json; charset=UTF-8',
                'User-Agent': 'Mozilla/5.0 (Linux; Android 9; ANE-LX3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.91 Mobile Safari/537.36',
                'Host': panel,
                'Connection': 'Keep-Alive',
                'Accept-Encoding': 'gzip'
            };

            const apiUrl = url.replace('get.php', 'player_api.php');

            try {
                const [userInfo, liveCategories, liveStreams, vodCategories, vodStreams, seriesCategories, series] = await Promise.all([
                    axios.get(apiUrl, { headers: headerj }),
                    axios.get(`${apiUrl}&action=get_live_categories`, { headers: headerj }),
                    axios.get(`${apiUrl}&action=get_live_streams`, { headers: headerj }),
                    axios.get(`${apiUrl}&action=get_vod_categories`, { headers: headerj }),
                    axios.get(`${apiUrl}&action=get_vod_streams`, { headers: headerj }),
                    axios.get(`${apiUrl}&action=get_series_categories`, { headers: headerj }),
                    axios.get(`${apiUrl}&action=get_series`, { headers: headerj })
                ]);

                const data = userInfo.data;
                if (data.user_info && data.server_info) {
                    // Información básica
                    document.getElementById('host').textContent = `${data.server_info.url}:${data.server_info.port}`;
                    document.getElementById('user').textContent = data.user_info.username;
                    document.getElementById('pass').textContent = data.user_info.password;
                    document.getElementById('expiry').textContent = new Date(data.user_info.exp_date * 1000).toLocaleDateString();
                    document.getElementById('active-cons').textContent = data.user_info.active_cons;
                    document.getElementById('max-cons').textContent = data.user_info.max_connections;
                    document.getElementById('status').textContent = 'ACTIVE';
                    
                    // Conteos
                    document.getElementById('live-count').textContent = liveStreams.data.length;
                    document.getElementById('vod-count').textContent = vodStreams.data.length;
                    document.getElementById('series-count').textContent = series.data.length;
                    
                    // URL M3U
                    document.getElementById('m3u-url').textContent = url;
                    
                    // Procesar categorías
                    processCategories(liveCategories.data, liveStreams.data, 'live-categories');
                    processCategories(vodCategories.data, vodStreams.data, 'vod-categories');
                    processCategories(seriesCategories.data, series.data, 'series-categories');
                    
                    // Actualizar timestamp
                    updateClock();
                    
                    // Mostrar resultados
                    document.getElementById('result').classList.remove('hidden');
                } else {
                    document.getElementById('result').classList.remove('hidden');
                    document.getElementById('status').textContent = 'INACTIVE';
                    document.getElementById('status').className = 'category-count';
                }
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('result').classList.remove('hidden');
                document.getElementById('status').textContent = 'ERROR';
                document.getElementById('status').className = 'category-count';
            } finally {
                document.getElementById('loading').style.display = 'none';
            }
        }

        // Funciones para generar reportes en diferentes estilos
        function generateClassicStyle() {
            const now = new Date().toISOString().replace('T', ' ').substring(0, 19);
            let content = `╭➤ 𝗛𝗶𝘁𝘀 ʙʏ ★彡【 IPTV ANALYZER PRO 】彡★\n`;
            
            content += `├●🌐 Host ➤ ${document.getElementById('host').textContent}\n`;
            content += `├●👤 User ➤ ${document.getElementById('user').textContent}\n`;
            content += `├●🔑 Pass ➤ ${document.getElementById('pass').textContent}\n`;
            content += `├●📆 Exp. ➤ ${document.getElementById('expiry').textContent}\n`;
            content += `├●👥 Act Con ➤ ${document.getElementById('active-cons').textContent}\n`;
            content += `├●👪 Max Con ➤ ${document.getElementById('max-cons').textContent}\n`;
            content += `├●⚡ Status ➤ ${document.getElementById('status').textContent}\n`;
            content += `╰─➤ 𝗛𝗶𝘁𝘀 ʙʏ ★彡【 IPTV ANALYZER PRO 】彡★\n\n`;
            
            content += `╭● 🎬 En Vivo ➤ ${document.getElementById('live-count').textContent}\n`;
            content += `├● 🎬 Películas ➤ ${document.getElementById('vod-count').textContent}\n`;
            content += `├● 🎬 Series ➤ ${document.getElementById('series-count').textContent}\n`;
            content += `╰─────────────── •\n\n`;
            
            content += `●🔗m3u_Url➤ ${document.getElementById('m3u-url').textContent}\n\n`;
            
            content += `╭➤Categorías en Vivo➤\n`;
            document.querySelectorAll('#live-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `├●${name} ${count}\n`;
            });
            content += `╰──${now}── •\n\n`;
            
            content += `╭➤Categorías VOD➤\n`;
            document.querySelectorAll('#vod-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `├●${name} ${count}\n`;
            });
            content += `╰──${now}── •\n\n`;
            
            content += `╭➤Categorías Series➤\n`;
            document.querySelectorAll('#series-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `├●${name} ${count}\n`;
            });
            content += `╰──${now}── •\n`;
            
            return content;
        }

        function generateModernStyle() {
            const now = new Date().toISOString().replace('T', ' ').substring(0, 19);
            let content = `───────────────────────────────────\n`;
            content += `  IPTV ANALYZER PRO - REPORT\n`;
            content += `───────────────────────────────────\n`;
            content += `🔹 Host: ${document.getElementById('host').textContent}\n`;
            content += `🔹 User: ${document.getElementById('user').textContent}\n`;
            content += `🔹 Pass: ${document.getElementById('pass').textContent}\n`;
            content += `🔹 Expiry: ${document.getElementById('expiry').textContent}\n`;
            content += `🔹 Status: ${document.getElementById('status').textContent}\n`;
            content += `───────────────────────────────────\n`;
            content += `📺 LIVE: ${document.getElementById('live-count').textContent} | `;
            content += `🎬 VOD: ${document.getElementById('vod-count').textContent} | `;
            content += `📽️ SERIES: ${document.getElementById('series-count').textContent}\n`;
            content += `───────────────────────────────────\n`;
            content += `🔗 M3U URL: ${document.getElementById('m3u-url').textContent}\n\n`;
            
            content += `📺 LIVE CATEGORIES:\n`;
            document.querySelectorAll('#live-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `├─${name} ${count}\n`;
            });
            
            content += `\n🎬 VOD CATEGORIES:\n`;
            document.querySelectorAll('#vod-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `├─${name} ${count}\n`;
            });
            
            content += `\n📽️ SERIES CATEGORIES:\n`;
            document.querySelectorAll('#series-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `├─${name} ${count}\n`;
            });
            
            content += `\nGenerated: ${now}\n`;
            return content;
        }

        function generateEmojiStyle() {
            const now = new Date().toISOString().replace('T', ' ').substring(0, 19);
            let content = `✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨\n`;
            content += `   🚀 IPTV ANALYSIS REPORT 🚀\n`;
            content += `✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨\n\n`;
            
            content += `🌍 HOST » ${document.getElementById('host').textContent}\n`;
            content += `👤 USER » ${document.getElementById('user').textContent}\n`;
            content += `🔐 PASS » ${document.getElementById('pass').textContent}\n`;
            content += `⏳ EXPIRY » ${document.getElementById('expiry').textContent}\n\n`;
            
            content += `📊 CONTENT SUMMARY:\n`;
            content += `   🟢 LIVE TV: ${document.getElementById('live-count').textContent} channels\n`;
            content += `   🟣 MOVIES: ${document.getElementById('vod-count').textContent} titles\n`;
            content += `   🔵 SERIES: ${document.getElementById('series-count').textContent} shows\n\n`;
            
            content += `🔗 M3U URL:\n${document.getElementById('m3u-url').textContent}\n\n`;
            
            content += `📺 LIVE CATEGORIES:\n`;
            document.querySelectorAll('#live-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `   ► ${name} ${count}\n`;
            });
            
            content += `\n🎬 VOD CATEGORIES:\n`;
            document.querySelectorAll('#vod-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `   ► ${name} ${count}\n`;
            });
            
            content += `\n📽️ SERIES CATEGORIES:\n`;
            document.querySelectorAll('#series-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `   ► ${name} ${count}\n`;
            });
            
            content += `\n📅 Generated: ${now}\n`;
            return content;
        }

        function generateCodeStyle() {
            const now = new Date().toISOString().replace('T', ' ').substring(0, 19);
            let content = `// =========== IPTV ANALYZER PRO =========== //\n`;
            content += `// === Generated: ${now} === //\n\n`;
            
            content += `const serverInfo = {\n`;
            content += `  host: "${document.getElementById('host').textContent}",\n`;
            content += `  user: "${document.getElementById('user').textContent}",\n`;
            content += `  pass: "${document.getElementById('pass').textContent}",\n`;
            content += `  status: "${document.getElementById('status').textContent}",\n`;
            content += `  expiry: "${document.getElementById('expiry').textContent}"\n`;
            content += `};\n\n`;
            
            content += `const contentStats = {\n`;
            content += `  live: ${document.getElementById('live-count').textContent},\n`;
            content += `  vod: ${document.getElementById('vod-count').textContent},\n`;
            content += `  series: ${document.getElementById('series-count').textContent}\n`;
            content += `};\n\n`;
            
            content += `// =========== CATEGORIES =========== //\n\n`;
            
            content += `// LIVE CATEGORIES\n`;
            document.querySelectorAll('#live-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent.replace('📺', '').trim();
                const count = item.querySelector('.category-count').textContent;
                content += `// ${name.padEnd(30)} ${count}\n`;
            });
            
            content += `\n// VOD CATEGORIES\n`;
            document.querySelectorAll('#vod-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent.replace('🎬', '').trim();
                const count = item.querySelector('.category-count').textContent;
                content += `// ${name.padEnd(30)} ${count}\n`;
            });
            
            content += `\n// SERIES CATEGORIES\n`;
            document.querySelectorAll('#series-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent.replace('📽️', '').trim();
                const count = item.querySelector('.category-count').textContent;
                content += `// ${name.padEnd(30)} ${count}\n`;
            });
            
            return content;
        }

        function generateTableStyle() {
            const now = new Date().toISOString().replace('T', ' ').substring(0, 19);
            let content = `+-----------------------------------------------+\n`;
            content += `|            IPTV ANALYSIS REPORT               |\n`;
            content += `+---------------------+-------------------------+\n`;
            content += `| 🔌 Host            | ${document.getElementById('host').textContent.padEnd(22)} |\n`;
            content += `| 👤 Username        | ${document.getElementById('user').textContent.substring(0, 22).padEnd(22)} |\n`;
            content += `| 🔑 Password        | ${document.getElementById('pass').textContent.padEnd(22)} |\n`;
            content += `| ⏳ Expiration      | ${document.getElementById('expiry').textContent.padEnd(22)} |\n`;
            content += `+---------------------+-------------------------+\n`;
            content += `| 📺 Live Channels   | ${document.getElementById('live-count').textContent.padEnd(22)} |\n`;
            content += `| 🎬 VOD Content     | ${document.getElementById('vod-count').textContent.padEnd(22)} |\n`;
            content += `| 📽️ TV Series       | ${document.getElementById('series-count').textContent.padEnd(22)} |\n`;
            content += `+---------------------+-------------------------+\n\n`;
            
            content += `=== LIVE CATEGORIES ============================\n`;
            document.querySelectorAll('#live-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `| ${name.padEnd(30)} ${count.padStart(8)} |\n`;
            });
            
            content += `\n=== VOD CATEGORIES =============================\n`;
            document.querySelectorAll('#vod-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `| ${name.padEnd(30)} ${count.padStart(8)} |\n`;
            });
            
            content += `\n=== SERIES CATEGORIES ==========================\n`;
            document.querySelectorAll('#series-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `| ${name.padEnd(30)} ${count.padStart(8)} |\n`;
            });
            
            content += `\n=== M3U URL ===================================\n`;
            content += `${document.getElementById('m3u-url').textContent}\n\n`;
            content += `Report generated: ${now}\n`;
            return content;
        }

        function generateSignatureStyle() {
            const now = new Date().toISOString().replace('T', ' ').substring(0, 19);
            let content = `█████████████████████████████████████████████████\n`;
            content += `█▄─▄▄─█─▄▄─█▄─▀█▀─▄█─▄▄▄▄█─█─█▄─▄███▄─▄█─▄▄▄▄▄█\n`;
            content += `██─▄█▀█─██─██─█▄█─██▄▄▄▄─█─▄─██─██▀██─██─██▄─██\n`;
            content += `▀▄▄▄▄▄▀▄▄▄▄▀▄▄▄▀▄▄▄▀▄▄▄▄▄▀▄▀▄▀▄▄▄▄▄▀▄▄▄▀▄▄▄▄▄▀\n\n`;
            
            content += `► ANALYZED SERVER: ${document.getElementById('host').textContent}\n`;
            content += `► USER CREDENTIALS: ${document.getElementById('user').textContent}\n`;
            content += `► EXPIRATION DATE: ${document.getElementById('expiry').textContent}\n\n`;
            
            content += `■ LIVE CONTENT: ${document.getElementById('live-count').textContent} streams\n`;
            content += `■ VOD LIBRARY: ${document.getElementById('vod-count').textContent} titles\n`;
            content += `■ SERIES: ${document.getElementById('series-count').textContent} shows\n\n`;
            
            content += `▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬\n\n`;
            
            content += `LIVE CATEGORIES:\n`;
            document.querySelectorAll('#live-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `► ${name} ${count}\n`;
            });
            
            content += `\nVOD CATEGORIES:\n`;
            document.querySelectorAll('#vod-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `► ${name} ${count}\n`;
            });
            
            content += `\nSERIES CATEGORIES:\n`;
            document.querySelectorAll('#series-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `► ${name} ${count}\n`;
            });
            
            content += `\nGenerated: ${now}\n`;
            return content;
        }

        function generateRetroStyle() {
            const now = new Date().toISOString().replace('T', ' ').substring(0, 19);
            let content = `╔══════════════════════════════════════════╗\n`;
            content += `║  ▄▄▄▄▄ ▄▄▄ ▄▄▄▄▄ ▄▄▄▄▄ ▄▄▄ ▄   ▄  ║\n`;
            content += `║  █   █ █   █   █ █   █ █   ██  █  ║\n`;
            content += `║  █▀▀▀▀ █▀▀▀ █▀▀  █▀▀  █▀▀▀ █ █ █  ║\n`;
            content += `║  █     █   █   █ █ ▄▄ █   █ ██ █  ║\n`;
            content += `║  █     █▄▄▄ █▄▄█ █▄▄█ █▄▄▄ █ ▀ █  ║\n`;
            content += `╚══════════════════════════════════════════╝\n\n`;
            
            content += `📺 HOST: ${document.getElementById('host').textContent}\n`;
            content += `📼 USER: ${document.getElementById('user').textContent}\n`;
            content += `🔒 PASS: ${document.getElementById('pass').textContent}\n`;
            content += `📅 EXPIRY: ${document.getElementById('expiry').textContent}\n`;
            content += `⚡ STATUS: ${document.getElementById('status').textContent}\n\n`;
            
            content += `📡 CONTENT SUMMARY:\n`;
            content += `├─📡 LIVE: ${document.getElementById('live-count').textContent}\n`;
            content += `├─📼 VOD: ${document.getElementById('vod-count').textContent}\n`;
            content += `└─📽 SERIES: ${document.getElementById('series-count').textContent}\n\n`;
            
            content += `🔗 M3U URL:\n${document.getElementById('m3u-url').textContent}\n\n`;
            
            content += `📺 LIVE CATEGORIES:\n`;
            document.querySelectorAll('#live-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `├─${name} ${count}\n`;
            });
            
            content += `\n📼 VOD CATEGORIES:\n`;
            document.querySelectorAll('#vod-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `├─${name} ${count}\n`;
            });
            
            content += `\n📽 SERIES CATEGORIES:\n`;
            document.querySelectorAll('#series-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `├─${name} ${count}\n`;
            });
            
            content += `\nGenerated: ${now}\n`;
            return content;
        }

        function generateCyberStyle() {
            const now = new Date().toISOString().replace('T', ' ').substring(0, 19);
            let content = `▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄\n`;
            content += `█▓▒░ 𝐈𝐏𝐓𝐕 𝐀𝐍𝐀𝐋𝐘𝐙𝐄𝐑 - 𝐂𝐘𝐁𝐄𝐑𝐏𝐔𝐍𝐊 𝐄𝐃𝐈𝐓𝐈𝐎𝐍 ░▒▓█\n`;
            content += `▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀\n\n`;
            
            content += `🖥️  HOST » ${document.getElementById('host').textContent}\n`;
            content += `👾  USER » ${document.getElementById('user').textContent}\n`;
            content += `🔐  PASS » ${document.getElementById('pass').textContent}\n`;
            content += `⏳  EXPIRY » ${document.getElementById('expiry').textContent}\n`;
            content += `⚡  STATUS » ${document.getElementById('status').textContent}\n\n`;
            
            content += `📊  CONTENT STATS:\n`;
            content += `├─🎮 LIVE » ${document.getElementById('live-count').textContent}\n`;
            content += `├─🎥 VOD » ${document.getElementById('vod-count').textContent}\n`;
            content += `└─📺 SERIES » ${document.getElementById('series-count').textContent}\n\n`;
            
            content += `🌐  M3U URL:\n${document.getElementById('m3u-url').textContent}\n\n`;
            
            content += `🔥 LIVE CATEGORIES:\n`;
            document.querySelectorAll('#live-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `├─${name} ${count}\n`;
            });
            
            content += `\n🎥 VOD CATEGORIES:\n`;
            document.querySelectorAll('#vod-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `├─${name} ${count}\n`;
            });
            
            content += `\n📺 SERIES CATEGORIES:\n`;
            document.querySelectorAll('#series-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `├─${name} ${count}\n`;
            });
            
            content += `\n⌚ Generated: ${now}\n`;
            return content;
        }

        function generateElegantStyle() {
            const now = new Date().toISOString().replace('T', ' ').substring(0, 19);
            let content = `✦•······················•✦•······················•✦\n`;
            content += `                   IPTV ANALYZER PRO\n`;
            content += `✦•······················•✦•······················•✦\n\n`;
            
            content += `✧ Host: ${document.getElementById('host').textContent}\n`;
            content += `✧ User: ${document.getElementById('user').textContent}\n`;
            content += `✧ Password: ${document.getElementById('pass').textContent}\n`;
            content += `✧ Expiry: ${document.getElementById('expiry').textContent}\n`;
            content += `✧ Status: ${document.getElementById('status').textContent}\n\n`;
            
            content += `✧ Content Summary:\n`;
            content += `  ✦ Live: ${document.getElementById('live-count').textContent}\n`;
            content += `  ✦ Movies: ${document.getElementById('vod-count').textContent}\n`;
            content += `  ✦ Series: ${document.getElementById('series-count').textContent}\n\n`;
            
            content += `✧ M3U URL:\n${document.getElementById('m3u-url').textContent}\n\n`;
            
            content += `✧ Live Categories:\n`;
            document.querySelectorAll('#live-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `  ✦ ${name} ${count}\n`;
            });
            
            content += `\n✧ VOD Categories:\n`;
            document.querySelectorAll('#vod-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `  ✦ ${name} ${count}\n`;
            });
            
            content += `\n✧ Series Categories:\n`;
            document.querySelectorAll('#series-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `  ✦ ${name} ${count}\n`;
            });
            
            content += `\nGenerated: ${now}\n`;
            return content;
        }

        function generateTechStyle() {
            const now = new Date().toISOString().replace('T', ' ').substring(0, 19);
            let content = `▗▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▖\n`;
            content += `▌  ⚡ IPTV ANALYZER PRO - TECH REPORT ⚡  ▐\n`;
            content += `▝▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▘\n\n`;
            
            content += `🔌 HOST » ${document.getElementById('host').textContent}\n`;
            content += `👤 USER » ${document.getElementById('user').textContent}\n`;
            content += `🔑 PASS » ${document.getElementById('pass').textContent}\n`;
            content += `⏳ EXPIRY » ${document.getElementById('expiry').textContent}\n`;
            content += `🟢 STATUS » ${document.getElementById('status').textContent}\n\n`;
            
            content += `📶 CONTENT STATS:\n`;
            content += `├─📡 LIVE: ${document.getElementById('live-count').textContent}\n`;
            content += `├─💿 VOD: ${document.getElementById('vod-count').textContent}\n`;
            content += `└─📺 SERIES: ${document.getElementById('series-count').textContent}\n\n`;
            
            content += `🌐 M3U URL:\n${document.getElementById('m3u-url').textContent}\n\n`;
            
            content += `📡 LIVE CATEGORIES:\n`;
            document.querySelectorAll('#live-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `├─${name} ${count}\n`;
            });
            
            content += `\n💿 VOD CATEGORIES:\n`;
            document.querySelectorAll('#vod-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `├─${name} ${count}\n`;
            });
            
            content += `\n📺 SERIES CATEGORIES:\n`;
            document.querySelectorAll('#series-categories .category-item').forEach(item => {
                const name = item.querySelector('.category-name').textContent;
                const count = item.querySelector('.category-count').textContent;
                content += `├─${name} ${count}\n`;
            });
            
            content += `\n⏱️ Generated: ${now}\n`;
            return content;
        }

        // Función para generar el contenido del archivo TXT según el estilo seleccionado
        function generateTxtContent(style = 'classic') {
            switch(style) {
                case 'modern': return generateModernStyle();
                case 'emoji': return generateEmojiStyle();
                case 'code': return generateCodeStyle();
                case 'table': return generateTableStyle();
                case 'signature': return generateSignatureStyle();
                case 'retro': return generateRetroStyle();
                case 'cyber': return generateCyberStyle();
                case 'elegant': return generateElegantStyle();
                case 'tech': return generateTechStyle();
                default: return generateClassicStyle();
            }
        }
        
        // Función para descargar el archivo TXT
        function downloadTxt() {
            const style = document.getElementById('report-style').value;
            const content = generateTxtContent(style);
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `iptv_analysis_${new Date().toISOString().slice(0, 10)}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Actualizar clima cada 5 minutos
        setInterval(updateWeather, 300000);
        // Actualizar reloj cada segundo
        setInterval(updateClock, 1000);
    </script>
</body>
</html>